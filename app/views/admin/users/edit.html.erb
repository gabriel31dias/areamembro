<div class="top-bar">
  <div>
    <%= link_to admin_user_path(@user), style: "color: #00d4ff; text-decoration: none; font-size: 0.875rem; display: inline-block; margin-bottom: 0.5rem;" do %>
      ← Voltar
    <% end %>
    <h2 style="font-size: 1.5rem; font-weight: 700;">Editar Usuário</h2>
  </div>
</div>

<div style="background: white; border-radius: 12px; padding: 2rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); max-width: 600px;">
  <%= form_with model: @user, url: admin_user_path(@user), method: :patch, local: true do |f| %>
    <% if @user.errors.any? %>
      <div class="alert alert-danger">
        <strong><%= pluralize(@user.errors.count, "erro") %> encontrado:</strong>
        <ul style="margin-top: 0.5rem; margin-left: 1.5rem;">
          <% @user.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div style="margin-bottom: 1.5rem;">
      <%= f.label :name, "Nome", class: "form-label" %>
      <%= f.text_field :name, class: "form-input", placeholder: "João Silva" %>
    </div>

    <div style="margin-bottom: 1.5rem;">
      <%= f.label :email, "Email", class: "form-label" %>
      <%= f.email_field :email, class: "form-input", required: true %>
    </div>

    <div style="margin-bottom: 1.5rem;">
      <%= f.label :role, "Tipo de Usuário", class: "form-label" %>
      <%= f.select :role, [['Admin', 'admin'], ['User', 'user'], ['Member', 'member']], {}, class: "form-input" %>
    </div>

    <div style="margin-bottom: 1.5rem;">
      <%= f.label :subscription_status, "Status de Assinatura", class: "form-label" %>
      <%= f.select :subscription_status, [['Free', 'free'], ['Subscriber', 'subscriber']], {}, class: "form-input" %>
    </div>

    <div style="padding: 1rem; background: #fef5e7; border-radius: 8px; margin-bottom: 1.5rem; font-size: 0.875rem;">
      <strong>Nota:</strong> Deixe os campos de senha em branco se não quiser alterá-la.
    </div>

    <div style="margin-bottom: 1.5rem;">
      <%= f.label :password, "Nova Senha (opcional)", class: "form-label" %>
      <%= f.password_field :password, class: "form-input", placeholder: "••••••••" %>
    </div>

    <div style="margin-bottom: 1.5rem;">
      <%= f.label :password_confirmation, "Confirmar Nova Senha", class: "form-label" %>
      <%= f.password_field :password_confirmation, class: "form-input", placeholder: "••••••••" %>
    </div>

    <div style="display: flex; gap: 1rem;">
      <%= f.submit "Salvar Alterações", class: "btn btn-primary" %>
      <%= link_to "Cancelar", admin_user_path(@user), class: "btn", style: "background: #e2e8f0; color: #2d3748;" %>
    </div>
  <% end %>
</div>

<style>
  .form-label {
    display: block;
    margin-bottom: 0.5rem;
    color: #2d3748;
    font-weight: 600;
    font-size: 0.875rem;
  }

  .form-input {
    width: 100%;
    padding: 0.875rem 1rem;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    font-size: 1rem;
    transition: all 0.2s;
  }

  .form-input:focus {
    outline: none;
    border-color: #00d4ff;
    box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
  }
</style>
