<!-- Member Header -->
<div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 4px 20px rgba(0,0,0,0.06); border: 1px solid rgba(0,0,0,0.04); margin-bottom: 1.5rem;">
  <div style="display: flex; align-items: center; gap: 1.5rem; margin-bottom: 1.5rem;">
    <div style="width: 80px; height: 80px; border-radius: 20px; background: linear-gradient(135deg, #00d4ff 0%, #0066ff 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 2rem; box-shadow: 0 8px 16px rgba(0,212,255,0.3);">
      <%= @member.name&.first&.upcase || @member.email.first.upcase %>
    </div>
    <div style="flex: 1;">
      <h1 style="font-weight: 800; color: #0a0e27; font-size: 1.75rem; margin-bottom: 0.5rem;"><%= @member.name || 'Sem nome' %></h1>
      <p style="color: #64748b; font-size: 1rem;"><%= @member.email %></p>
      <div style="display: flex; gap: 0.75rem; margin-top: 0.75rem; flex-wrap: wrap;">
        <span style="padding: 0.375rem 1rem; border-radius: 9999px; font-size: 0.875rem; font-weight: 600; <%= @member.status == 'active' ? 'background: #d1fae5; color: #065f46;' : 'background: #fee2e2; color: #991b1b;' %>">
          <%= @member.status == 'active' ? '✓ Ativo' : '✕ Bloqueado' %>
        </span>
        <% if @member.subscription_status == 'subscriber' %>
          <span style="padding: 0.375rem 1rem; border-radius: 9999px; font-size: 0.875rem; font-weight: 600; background: #fef3c7; color: #92400e;">
            ⭐ Assinante
          </span>
        <% end %>
      </div>
    </div>
    <div style="display: flex; gap: 0.75rem;">
      <%= link_to edit_panel_member_path(@member), style: "padding: 0.875rem 1.5rem; background: linear-gradient(135deg, #00d4ff 0%, #0066ff 100%); color: white; border-radius: 12px; text-decoration: none; font-weight: 600; font-size: 0.9375rem;" do %>
        ✏️ Editar
      <% end %>
      <%= link_to panel_members_path, style: "padding: 0.875rem 1.5rem; border: 2px solid #e2e8f0; color: #475569; border-radius: 12px; text-decoration: none; font-weight: 600; font-size: 0.9375rem;" do %>
        ← Voltar
      <% end %>
    </div>
  </div>
</div>

<!-- Stats Grid -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.25rem; margin-bottom: 1.5rem;">
  <div style="background: white; border-radius: 20px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.04); border: 1px solid rgba(0,0,0,0.04);">
    <div style="color: #64748b; font-size: 0.875rem; margin-bottom: 0.5rem;">Total em Vendas</div>
    <div style="font-weight: 800; font-size: 1.75rem; color: #10b981;">R$ <%= number_with_precision(@member.sales.completed.sum(:amount), precision: 2) %></div>
  </div>
  
  <div style="background: white; border-radius: 20px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.04); border: 1px solid rgba(0,0,0,0.04);">
    <div style="color: #64748b; font-size: 0.875rem; margin-bottom: 0.5rem;">Cursos Matriculados</div>
    <div style="font-weight: 800; font-size: 1.75rem; color: #00d4ff;"><%= @member.course_progresses.count %></div>
  </div>
  
  <div style="background: white; border-radius: 20px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.04); border: 1px solid rgba(0,0,0,0.04);">
    <div style="color: #64748b; font-size: 0.875rem; margin-bottom: 0.5rem;">Total de Vendas</div>
    <div style="font-weight: 800; font-size: 1.75rem; color: #0a0e27;"><%= @member.sales.count %></div>
  </div>
  
  <div style="background: white; border-radius: 20px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.04); border: 1px solid rgba(0,0,0,0.04);">
    <div style="color: #64748b; font-size: 0.875rem; margin-bottom: 0.5rem;">Membro desde</div>
    <div style="font-weight: 800; font-size: 1.75rem; color: #0a0e27;"><%= @member.created_at.strftime('%d/%m/%Y') %></div>
  </div>
</div>

<!-- Recent Sales -->
<div style="background: white; border-radius: 20px; padding: 1.5rem; box-shadow: 0 4px 20px rgba(0,0,0,0.06); border: 1px solid rgba(0,0,0,0.04); margin-bottom: 1.5rem;">
  <h2 style="font-weight: 700; color: #0a0e27; font-size: 1.25rem; margin-bottom: 1.25rem;">💰 Vendas Recentes</h2>
  
  <% if @sales.any? %>
    <div style="overflow-x: auto;">
      <table style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr style="border-bottom: 2px solid #e2e8f0;">
            <th style="text-align: left; padding: 0.75rem; color: #64748b; font-size: 0.875rem; font-weight: 600;">Plano</th>
            <th style="text-align: left; padding: 0.75rem; color: #64748b; font-size: 0.875rem; font-weight: 600;">Valor</th>
            <th style="text-align: left; padding: 0.75rem; color: #64748b; font-size: 0.875rem; font-weight: 600;">Status</th>
            <th style="text-align: left; padding: 0.75rem; color: #64748b; font-size: 0.875rem; font-weight: 600;">Data</th>
          </tr>
        </thead>
        <tbody>
          <% @sales.each do |sale| %>
            <tr style="border-bottom: 1px solid #f1f5f9;">
              <td style="padding: 1rem 0.75rem; font-weight: 600; color: #0a0e27;"><%= sale.plan&.name || 'Sem plano' %></td>
              <td style="padding: 1rem 0.75rem; font-weight: 700; color: #10b981;">R$ <%= number_with_precision(sale.amount, precision: 2) %></td>
              <td style="padding: 1rem 0.75rem;">
                <span style="padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; <%= sale.status == 'completed' ? 'background: #d1fae5; color: #065f46;' : sale.status == 'pending' ? 'background: #fef3c7; color: #92400e;' : 'background: #fee2e2; color: #991b1b;' %>">
                  <%= sale.status == 'completed' ? '✓ Completa' : sale.status == 'pending' ? '⏳ Pendente' : '✕ Cancelada' %>
                </span>
              </td>
              <td style="padding: 1rem 0.75rem; color: #64748b;"><%= sale.created_at.strftime('%d/%m/%Y %H:%M') %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <div style="text-align: center; padding: 3rem 1rem; color: #94a3b8;">
      <p>Nenhuma venda registrada</p>
    </div>
  <% end %>
</div>

<!-- Course Progress -->
<div style="background: white; border-radius: 20px; padding: 1.5rem; box-shadow: 0 4px 20px rgba(0,0,0,0.06); border: 1px solid rgba(0,0,0,0.04);">
  <h2 style="font-weight: 700; color: #0a0e27; font-size: 1.25rem; margin-bottom: 1.25rem;">📚 Progresso nos Cursos</h2>
  
  <% if @course_progresses.any? %>
    <div style="display: grid; gap: 1rem;">
      <% @course_progresses.each do |progress| %>
        <div style="padding: 1.25rem; background: #f8fafc; border-radius: 12px; border: 1px solid #e2e8f0;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
            <h3 style="font-weight: 600; color: #0a0e27; font-size: 1rem;"><%= progress.course.title %></h3>
            <span style="font-weight: 700; color: #00d4ff; font-size: 0.875rem;"><%= progress.progress %>%</span>
          </div>
          <div style="width: 100%; height: 8px; background: #e2e8f0; border-radius: 9999px; overflow: hidden;">
            <div style="height: 100%; background: linear-gradient(90deg, #00d4ff 0%, #0066ff 100%); width: <%= progress.progress %>%; transition: width 0.3s;"></div>
          </div>
          <div style="margin-top: 0.5rem; font-size: 0.8125rem; color: #64748b;">
            Última atividade: <%= progress.updated_at.strftime('%d/%m/%Y %H:%M') %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div style="text-align: center; padding: 3rem 1rem; color: #94a3b8;">
      <p>Nenhum curso iniciado</p>
    </div>
  <% end %>
</div>
